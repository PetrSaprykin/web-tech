# Лабораторная работа №8 - Реализация функциональности оформления заказа

## Описание

Веб-приложение для доставки бизнес-ланчей с функциональностью:
- Выбор блюд из меню
- Сохранение заказа в localStorage
- Валидация состава заказа (комбо)
- Оформление и отправка заказа на сервер
- Sticky-панель для быстрого перехода к оформлению

## Структура проекта

- **index.html** - Главная страница
- **menu.html** - Страница выбора блюд
- **order.html** - Страница оформления заказа
- **styles.css** - Общие стили
- **menu-styles.css** - Стили для страницы меню
- **order-styles.css** - Стили для страницы оформления заказа
- **display-dishes.js** - Загрузка и отображение блюд
- **order-manager.js** - Управление заказом и localStorage
- **order-page.js** - Функциональность страницы оформления заказа
- **sticky-order-panel.js** - Управление sticky-панелью (если используется)

## API конфигурация

**API URL:** https://edu.std-900.ist.mospolytech.ru
**API Key:** 7d35d27d-711b-4c9e-9b60-66b6f3bf2a9d

API ключ уже встроен в файл `order-page.js`.

## Функциональность

### 1. Сохранение данных в localStorage

Заказ автоматически сохраняется в localStorage при добавлении/удалении блюд.
Формат хранения: JSON-объект с категориями блюд (soup, main, salad, drink, dessert).

### 2. Страница "Собрать ланч" (menu.html)

- Отображение блюд по категориям
- Фильтрация по виду блюда (рыбное, мясное, вегетарианское и т.д.)
- Выделение выбранных блюд
- Sticky-панель с суммой заказа и кнопкой "Перейти к оформлению"
- Валидация комбо перед переходом к оформлению

**Доступные комбо:**
1. Суп + Главное блюдо + Салат + Напиток
2. Суп + Главное блюдо + Напиток
3. Суп + Салат + Напиток
4. Главное блюдо + Салат + Напиток
5. Главное блюдо + Напиток
(+ Десерт можно добавить к любому комбо)

### 3. Страница "Оформить заказ" (order.html)

**Раздел "Состав заказа":**
- Отображение карточек выбранных блюд
- Кнопка "Удалить" для каждого блюда
- Сообщение с ссылкой на menu.html, если ничего не выбрано

**Раздел "Оформление заказа":**
- Форма с данными покупателя
- Левая панель с информацией о выбранных блюдах и стоимостью
- Автоматический пересчет стоимости при удалении блюд
- Валидация комбо перед отправкой
- Отправка заказа на сервер через API

**Поля формы:**
- Имя (обязательное)
- Email (обязательное)
- Телефон (обязательное)
- Адрес доставки (обязательное)
- Тип доставки (обязательное): "Сейчас" или "К указанному времени"
- Время доставки (если выбран тип "К указанному времени")
- Комментарий (необязательное)
- Подписка на рассылку (checkbox)

### 4. Отправка заказа

При нажатии кнопки "Отправить заказ":
1. Проверяется валидность комбо
2. Формируются данные заказа в формате JSON
3. Отправляется POST-запрос на `/labs/api/orders?api_key={API_KEY}`
4. При успешной отправке:
   - Заказ удаляется из localStorage
   - Показывается уведомление с номером заказа
   - Через 3 секунды происходит редирект на главную страницу
5. При ошибке - показывается сообщение об ошибке

## Запуск проекта

1. Разместите все файлы в одной директории
2. Откройте index.html в браузере
3. Или разместите на веб-сервере (Netlify, GitHub Pages, хостинг Московского Политеха)

**Важно:** При использовании GitHub Pages или Netlify убедитесь, что используется HTTPS, 
так как API требует безопасного соединения.

## Требования к браузеру

- Поддержка localStorage
- Поддержка fetch API
- Поддержка ES6 (стрелочные функции, async/await)
- Рекомендуется использовать современные версии браузеров (Chrome, Firefox, Safari, Edge)

## Особенности реализации

1. **localStorage используется только для хранения ID блюд** (и минимальной информации о них для отображения)
2. **Валидация комбо** происходит как при переходе к оформлению, так и при отправке заказа
3. **Sticky-панель** отображается только когда выбрано хотя бы одно блюдо
4. **Автоматическое выделение** выбранных блюд при загрузке страницы menu.html
5. **Пересчет стоимости** при добавлении/удалении блюд
6. **Уведомления** об успешном добавлении блюда и оформлении заказа

## Проверка работы

1. Откройте menu.html
2. Выберите блюда согласно одному из доступных комбо
3. Убедитесь, что sticky-панель появилась с правильной суммой
4. Нажмите "Перейти к оформлению"
5. Проверьте отображение заказа на странице order.html
6. Заполните форму и отправьте заказ
7. После успешной отправки проверьте, что localStorage очищен

## Авторы

Выполнено студентом группы 241-326
Московский Политехнический Университет

## Лицензия

Учебный проект
